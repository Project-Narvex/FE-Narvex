@tailwind base;
@tailwind components;
@tailwind utilities;

/* Base layer - Essential resets and global styles */
@layer base {
  html {
    @apply overflow-x-hidden w-full scroll-smooth;
    overscroll-behavior: contain;
  }

  body {
    @apply bg-white text-gray-700 font-secondary leading-normal overflow-x-hidden w-full;
    min-width: 320px;
  }

  * {
    @apply box-border;
  }

  img {
    @apply max-w-full h-auto;
  }
}

/* Component layer - Reusable component styles */
@layer components {
  /* Coverflow Container */
  .coverflow-container {
    @apply relative;
    -webkit-mask-image: linear-gradient(to right, transparent, black 20%, black 80%, transparent);
    mask-image: linear-gradient(to right, transparent, black 20%, black 80%, transparent);
  }

  /* Container Responsive */
  .container {
    @apply w-full max-w-full mx-auto px-4;
  }

  @media (min-width: 640px) {
    .container {
      @apply max-w-screen-sm px-6;
    }
  }

  @media (min-width: 768px) {
    .container {
      @apply max-w-screen-md;
    }
  }

  @media (min-width: 1024px) {
    .container {
      @apply max-w-screen-lg px-8;
    }
  }

  @media (min-width: 1280px) {
    .container {
      @apply max-w-screen-xl;
    }
  }

  @media (min-width: 1536px) {
    .container {
      @apply max-w-screen-2xl;
    }
  }

  /* Typography Classes */
  .heading-1 {
    @apply font-primary font-bold leading-tight text-blue-900 break-words;
    font-size: clamp(2.5rem, 5vw, 3.75rem);
  }

  .heading-2 {
    @apply font-primary font-bold leading-tight text-blue-900 break-words;
    font-size: clamp(2rem, 4vw, 3rem);
  }

  .heading-3 {
    @apply font-primary font-semibold leading-snug text-blue-900 break-words;
    font-size: clamp(1.5rem, 3vw, 2.25rem);
  }

  .heading-4 {
    @apply font-primary font-semibold leading-snug text-blue-900 break-words;
    font-size: clamp(1.25rem, 2.5vw, 1.875rem);
  }

  .body-large {
    @apply font-secondary font-normal leading-relaxed text-gray-700 break-words;
    font-size: clamp(1rem, 1.5vw, 1.25rem);
  }

  .body-normal {
    @apply font-secondary font-normal leading-normal text-gray-700 break-words;
    font-size: clamp(0.875rem, 1.2vw, 1rem);
  }

  .body-small {
    @apply font-secondary font-normal leading-normal text-gray-600 break-words;
    font-size: clamp(0.75rem, 1vw, 0.875rem);
  }

  /* Text Utility Classes */
  .text-accent {
    @apply text-gold-500;
  }

  .text-muted {
    @apply text-gray-500;
  }

  .text-inverse {
    @apply text-white;
  }

  .text-responsive {
    @apply break-words;
    overflow-wrap: break-word;
    hyphens: auto;
  }

  /* Touch Target */
  .touch-target {
    @apply min-h-11 min-w-11;
  }

  /* Overflow Safe */
  .overflow-safe {
    @apply max-w-full overflow-x-hidden;
  }

  /* Button Styles */
  .btn {
    @apply inline-flex items-center justify-center font-primary font-semibold no-underline border-0 rounded-lg cursor-pointer transition-all duration-200 ease-in-out text-base px-8 py-4;
  }

  .btn-primary {
    @apply bg-blue-500 text-white hover:bg-blue-600 hover:-translate-y-0.5 hover:shadow-glow-blue;
  }

  .btn-secondary {
    @apply bg-gold-500 text-white hover:bg-gold-600 hover:-translate-y-0.5 hover:shadow-glow-gold;
  }

  .btn-outline {
    @apply bg-transparent text-blue-500 border-2 border-blue-500 hover:bg-blue-500 hover:text-white;
  }

  .btn-ghost {
    @apply bg-transparent text-gold-500 border-2 border-transparent hover:bg-gold-50 hover:border-gold-200;
  }

  /* Card Styles */
  .card {
    @apply bg-white rounded-2xl shadow-md overflow-hidden relative;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .card::before {
    @apply absolute inset-0 opacity-0;
    content: '';
    background: linear-gradient(135deg, rgba(99, 130, 180, 0.05) 0%, rgba(219, 196, 138, 0.05) 100%);
    transition: opacity 0.3s ease;
  }

  .card:hover {
    @apply shadow-xl;
    transform: translateY(-8px) scale(1.02);
  }

  .card:hover::before {
    @apply opacity-100;
  }

  .service-card {
    @apply p-8 text-center border border-gray-200 relative overflow-hidden;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .service-card::after {
    @apply absolute top-1/2 left-1/2 w-0 h-0 rounded-full;
    content: '';
    background: radial-gradient(circle, rgba(219, 196, 138, 0.1) 0%, transparent 70%);
    transition: all 0.6s ease;
    transform: translate(-50%, -50%);
  }

  .service-card:hover {
    @apply border-gold-400 shadow-gold;
  }

  .service-card:hover::after {
    @apply w-96 h-96;
  }

  /* Gradient Classes */
  .gradient-primary {
    @apply bg-gradient-primary;
  }

  .gradient-secondary {
    @apply bg-gradient-secondary;
  }

  .gradient-hero {
    @apply bg-gradient-hero;
  }

  .gradient-vibrant {
    @apply bg-gradient-vibrant;
  }

  .gradient-overlay {
    @apply bg-gradient-overlay;
  }

  /* Section Padding */
  .section-padding {
    @apply py-12 sm:py-16 md:py-20 lg:py-24;
  }

  .section-padding-large {
    @apply py-32;
  }

  .card-padding {
    @apply p-8;
  }

  .button-padding {
    @apply px-8 py-4;
  }

  /* Grid Responsive */
  .grid-responsive {
    @apply grid grid-cols-1 gap-4 sm:grid-cols-2 sm:gap-6 md:gap-8 lg:grid-cols-3 lg:gap-10;
  }

  /* Space Y Mobile */
  .space-y-mobile > * + * {
    @apply mt-4 sm:mt-6 md:mt-8;
  }

  /* Scroll Snap */
  .scroll-snap-container {
    scroll-snap-type: y proximity;
    scroll-padding-top: 80px;
    overscroll-behavior-y: contain;
  }

  .scroll-snap-section {
    @apply min-h-screen relative;
    scroll-snap-align: start;
    scroll-snap-stop: normal;
    scroll-margin-top: 60px;
    transition: scroll-margin 0.3s ease;
  }

  /* Scroll Animation States
  .scroll-animate {
    @apply opacity-0 translate-y-8 transition-all duration-700 ease-out;
  }

  .scroll-animate.animate-in {
    @apply opacity-100 translate-y-0;
  }

  .scroll-animate-left {
    @apply opacity-0 -translate-x-8 transition-all duration-700 ease-out;
  }

  .scroll-animate-left.animate-in {
    @apply opacity-100 translate-x-0;
  }

  .scroll-animate-right {
    @apply opacity-0 translate-x-8 transition-all duration-700 ease-out;
  }

  .scroll-animate-right.animate-in {
    @apply opacity-100 translate-x-0;
  }

  .scroll-animate-scale {
    @apply opacity-0 scale-75 transition-all duration-700 ease-out;
  }

  .scroll-animate-scale.animate-in {
    @apply opacity-100 scale-100;
  } */

  /* Hover Effects */
  .hover-depth {
    @apply transition-all duration-300 ease-out;
  }

  .hover-depth:hover {
    @apply shadow-depth-3 -translate-y-2;
  }

  .hover-depth-subtle {
    @apply transition-all duration-300 ease-out;
  }

  .hover-depth-subtle:hover {
    @apply shadow-depth-1 -translate-y-1;
  }

  /* Perspective Classes */
  .perspective-1000 {
    perspective: 1000px;
  }

  .perspective-1500 {
    perspective: 1500px;
  }

  .perspective-2000 {
    perspective: 2000px;
  }
}

/* Utilities layer - Custom utilities and responsive overrides */
@layer utilities {
  /* Animation Stagger Delays */
  .animate-stagger-1 {
    animation-delay: 0.1s;
  }

  .animate-stagger-2 {
    animation-delay: 0.3s;
  }

  .animate-stagger-3 {
    animation-delay: 0.5s;
  }

  .animate-stagger-4 {
    animation-delay: 0.7s;
  }

  .animate-stagger-5 {
    animation-delay: 0.9s;
  }

  .animate-stagger-6 {
    animation-delay: 1.1s;
  }

  .animate-stagger-7 {
    animation-delay: 1.3s;
  }

  /* Responsive Scroll Snap */
  @media (min-width: 768px) {
    .scroll-snap-container {
      scroll-padding-top: 100px;
    }
    
    .scroll-snap-section {
      scroll-margin-top: 80px;
    }
  }

  /* Mobile optimization */
  @media (max-width: 767px) {
    .scroll-snap-container {
      scroll-snap-type: none;
    }
    
    .scroll-snap-section {
      scroll-snap-align: none;
    }
  }

  /* Mobile Animation Optimizations */
  @media (max-width: 768px) {
    .animate-pulse,
    .animate-bounce,
    .animate-spin {
      animation-duration: 1s;
    }
    
    .transform-3d,
    [data-tilt],
    .perspective-1000,
    .perspective-1500,
    .perspective-2000 {
      transform: none !important;
      perspective: none !important;
    }
    
    .hover-depth,
    .hover-depth-subtle {
      transform: none !important;
      @apply shadow-md;
    }
    
    [data-parallax] {
      transform: none !important;
    }
    
    .filter.blur-xl,
    .filter.blur-2xl,
    .filter.blur-3xl {
      filter: blur(4px) !important;
    }
  }

  /* Touch device optimizations */
  @media (hover: none) and (pointer: coarse) {
    .group:hover .group-hover\:scale-110 {
      transform: none !important;
    }
    
    .group:hover .group-hover\:rotate-3 {
      transform: none !important;
    }
    
    .transition-all {
      transition-property: opacity, background-color !important;
    }
  }

  /* Client Carousel Custom Styles */
  .client-carousel-container {
    /* Enhanced scrolling with momentum */
    scroll-behavior: auto;
    mask-image: linear-gradient(to right, transparent 0%, #000 10%, #000 90%, transparent 100%);
    -webkit-mask-image: linear-gradient(to right, transparent 0%, #000 10%, #000 90%, transparent 100%);
    /* Improve performance */
    will-change: scroll-position;
    transform: translateZ(0);
    backface-visibility: hidden;
  }

  /* Hide scrollbars */
  .scrollbar-hide {
    -ms-overflow-style: none;  /* Internet Explorer 10+ */
    scrollbar-width: none;  /* Firefox */
  }
  
  .scrollbar-hide::-webkit-scrollbar { 
    display: none;  /* Safari and Chrome */
  }

  /* Smooth scrolling for carousel */
  .client-carousel-container * {
    will-change: transform;
  }

  /* Mobile carousel optimizations */
  @media (max-width: 768px) {
    .client-carousel-container {
      /* Reduce mask gradient on mobile for better visibility */
      mask-image: linear-gradient(to right, transparent 0%, #000 5%, #000 95%, transparent 100%);
      -webkit-mask-image: linear-gradient(to right, transparent 0%, #000 5%, #000 95%, transparent 100%);
    }
    
    /* Reduce performance optimizations on mobile to prevent issues */
    .client-carousel-container {
      will-change: auto;
      transform: none;
      backface-visibility: visible;
    }
  }

  .client-logo-container {
    /* Ensure logos are properly centered and responsive */
    backdrop-filter: blur(2px);
    border-radius: 8px;
    background: rgba(255, 255, 255, 0.02);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Logo Image Components */
  .logo-image-container {
    @apply relative overflow-hidden;
  }

  .logo-image-loading {
    @apply absolute inset-0 bg-gray-100 animate-pulse flex items-center justify-center;
  }

  .logo-image-error {
    @apply bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center;
  }

  .company-logo-container {
    @apply relative overflow-hidden rounded-lg;
  }

  /* Smart Logo Image Components */
  .smart-logo-container {
    @apply relative overflow-hidden rounded-lg;
  }

  .smart-logo-loading {
    @apply absolute inset-0 bg-gray-100 animate-pulse flex items-center justify-center;
  }

  .smart-logo-error {
    @apply bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center;
  }

  .smart-company-logo {
    @apply relative overflow-hidden rounded-lg transition-transform duration-300;
  }

  .smart-client-logo {
    @apply relative overflow-hidden rounded-lg transition-transform duration-300;
  }

  /* High Quality Image Settings */
  .high-quality-image {
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
    image-rendering: pixelated;
  }

  .smart-logo-image {
    @apply relative overflow-hidden rounded-lg;
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
  }

  .service-icon-high-quality {
    @apply relative overflow-hidden rounded-lg transition-transform duration-300;
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
  }

  .company-logo-container {
    @apply relative overflow-hidden rounded-lg transition-transform duration-300;
  }

  /* Prevent animation conflicts - disable all CSS transitions for animated elements */
  .service-card,
  .card,
  .portfolio-item,
  .testimonial-card,
  .service-card *,
  .card *,
  .portfolio-item *,
  .testimonial-card * {
    transition: none !important;
    animation: none !important;
  }

  /* Only allow GSAP-controlled animations */
  .service-card[data-gsap-animated],
  .card[data-gsap-animated],
  .portfolio-item[data-gsap-animated],
  .testimonial-card[data-gsap-animated] {
    transition: transform 0.3s ease-out !important;
  }

  /* Disable pulse animations that cause continuous popping */
  .animate-pulse-hover {
    animation: none !important;
  }

  /* Disable all pulse animations globally to prevent conflicts */
  .animate-pulse,
  .animate-pulse-hover,
  .animate-pulse-glow {
    animation: none !important;
  }

  /* Ensure service icons are completely static */
  .service-icon,
  .service-icon *,
  .service-icon-high-quality,
  .service-icon-high-quality * {
    animation: none !important;
    transition: none !important;
  }

  .client-logo-container:hover {
    background: rgba(255, 255, 255, 0.05);
    transform: translateY(-2px);
  }

  .client-logo-fallback {
    /* Enhanced fallback styling */
    backdrop-filter: blur(4px);
    border: 1px solid rgba(255, 255, 255, 0.15);
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.08) 0%, rgba(255, 255, 255, 0.02) 100%);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
  }

  /* Testimonial carousel section styling */
  .testimonial-carousel-heading {
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  }

  .testimonial-carousel-description {
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
  }

  /* Accessibility - Respect user preferences */
  @media (prefers-reduced-motion: reduce) {
    html {
      scroll-behavior: auto;
    }
    
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
      transform: none !important;
    }
  }

  /* Keyboard navigation support */
  .scroll-snap-container:focus-within {
    scroll-behavior: smooth;
  }

  /* Better scroll snap behavior */
  @supports (scroll-snap-type: y proximity) {
    .scroll-snap-container {
      scroll-snap-type: y proximity;
    }
  }
}
